/*
	Source:
	van Creij, Maurice (2012). "useful.slideshow.js: A simple slideshow", version 20120606, http://www.woollymittens.nl/.

	License:
	This work is licensed under a Creative Commons Attribution 3.0 Unported License.

	Prerequisites:
	<script src="./js/useful.js"></script>
	<!--[if IE]>
		<script src="./js/html5.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
	<![endif]-->
*/(function(e){"use strict";var t={};t={start:function(e,n){if(!n.outlets){n.outlets={};n.thumbnails=[0];n.figures=[0];n.titles=[0];n.descriptions=[0];n.longdescs=[0];var r=e.getElementsByTagName("a"),i=e.getElementsByTagName("img");n.hasLinks=r.length===i.length;for(var s=0;s<i.length;s+=1){n.thumbnails.push(i[s].src);n.titles.push(i[s].getAttribute("title"));n.descriptions.push(i[s].getAttribute("alt"));n.longdescs.push(i[s].getAttribute("longdesc"));n.figures[n.figures.length]=n.hasLinks?r[s].href:i[s].src}n.outlets.index=1;n.outlets.parent=e}n.retry=null;n.outlets.parent.style.visibility="hidden";setTimeout(function(){t.setup(n);setTimeout(function(){t.update(n);n.outlets.parent.style.visibility="visible"},900)},100)},setup:function(e){var n=e.outlets.parent;n.className+=" captions_"+e.captions;n.className+=" scaling_"+e.scaling;n.innerHTML="";e.width&&(n.style.width=e.width+e.widthUnit);e.height&&(n.style.height=e.height+e.heightUnit);n.addEventListener?n.addEventListener("mousewheel",function(n){t.wheel(n,e)},!1):n.attachEvent("onmousewheel",function(n){t.wheel(n,e)});n.addEventListener&&n.addEventListener("DOMMouseScroll",function(n){t.wheel(n,e)},!1);n.ontouchstart=function(n){t.touch.start(n,e)};n.ontouchmove=function(n){t.touch.move(n,e)};n.ontouchend=function(n){t.touch.end(n,e)};t.figures.setup(e);t.thumbnails.setup(e);t.automatic.setup(e)},update:function(e){if(e.outlets.parent.offsetHeight===0){clearTimeout(e.retry);e.retry=setTimeout(function(){t.update(e)},1e3)}else{t.figures.update(e);t.thumbnails.update(e)}},wheel:function(n,r){var i=window.event?window.event.wheelDelta/120:-n.detail/3;i<0&&r.outlets.index>1?t.figures.menu.prev({target:r.outlets.prevSlide},r.outlets.prevSlide,r):i>0&&r.outlets.index<r.outlets.figures.length-1&&t.figures.menu.next({target:r.outlets.nextSlide},r.outlets.nextSlide,r);e.events.cancel(n)},touch:{x:null,y:null,start:function(e,n){t.touch.x=e.touches[0].pageX;t.touch.y=e.touches[0].pageY;t.touch.sensitivity=n.outlets.parent.offsetWidth*.6;t.automatic.stop(n)},move:function(n,r){if(t.touch.x){var i=n.touches[0].pageX-t.touch.x,s=n.touches[0].pageY-t.touch.y,o=t.touch.sensitivity;if(Math.abs(s)<o){if(i<-1*o&&r.outlets.index<r.outlets.figures.length-1){t.figures.menu.next({target:r.outlets.nextSlide},r.outlets.nextSlide,r);t.touch.x=0;t.touch.y=0}else if(i>o&&r.outlets.index>1){t.figures.menu.prev({target:r.outlets.prevSlide},r.outlets.prevSlide,r);t.touch.x=0;t.touch.y=0}e.events.cancel(n)}}},end:function(e,n){t.touch.x=null;t.touch.y=null;n.hover&&n.hover==="pause"&&t.automatic.start(n)}},automatic:{setup:function(e){var n=e.outlets.parent,r=t.automatic;if(e.hover&&e.hover==="pause"){n.onmouseover=function(){r.stop(e)};n.onmouseout=function(){r.start(e)}}e.idle&&e.idle>=0&&r.start(e)},start:function(e){clearTimeout(e.idleTimeout);e.idleTimeout=setInterval(function(){e.outlets.index=e.outlets.index<e.outlets.figures.length-1?e.outlets.index+1:1;t.update(e)},e.idle)},stop:function(e){clearTimeout(e.idleTimeout)}},figures:{setup:function(e){e.outlets.figures=[0];for(var n=1;n<e.figures.length;n+=1){var r=document.createElement("figure");r.className=n===1?" "+e.transition+"_current":" "+e.transition+"_next";var i=document.createElement("img");i.src=e.thumbnails[n];i.setAttribute("alt","");r.appendChild(i);t.figures.events.imageLoad(i,e);t.figures.events.imageClick(n,i,e);var s="";s+=e.titles&&e.titles[n]?"<strong>"+e.titles[n]+"</strong> ":"";s+=e.descriptions&&e.descriptions[n]?e.descriptions[n]:"";if(s!==""){var o=document.createElement("figcaption");o.innerHTML=s;r.appendChild(o)}e.divide&&parseInt(e.divide,10)>0&&(r.style.height=e.divide);if(e.speed){r.style.msTransitionDuration=e.speed/1e3+"s";r.style.OTransitionDuration=e.speed/1e3+"s";r.style.WebkitTransitionDuration=e.speed/1e3+"s";r.style.MozTransitionDuration=e.speed/1e3+"s";r.style.transitionDuration=e.speed/1e3+"s"}if(e.ease){r.style.msTransitionTimingFunction=e.ease;r.style.OTransitionTimingFunction=e.ease;r.style.WebkitTransitionTimingFunction=e.ease;r.style.MozTransitionTimingFunction=e.ease;r.style.transitionTimingFunction=e.ease}e.outlets.parent.appendChild(r);e.outlets.figures[n]=r}t.figures.menu.setup(e)},events:{imageLoad:function(e,n){e.onload=function(){t.figures.update(n)}},imageClick:function(e,t,n){if(n.longdescs[e]){t.style.cursor="pointer";t.onclick=function(){document.location.href=n.longdescs[e]}}}},update:function(n){for(var r=1,i=n.outlets.figures.length;r<i;r+=1){var s=n.outlets.figures[r],o=s.getElementsByTagName("img")[0],u=n.transition+"_"+s.className.split("_")[1];o.className.match(/ratio/gi)||(o.className=o.offsetWidth>o.offsetHeight?"ratio_landscape":"ratio_portrait");(n.scaling==="fill"&&(o.offsetWidth<s.offsetWidth||o.offsetHeight<s.offsetHeight)||n.scaling==="fit"&&(o.offsetWidth>s.offsetWidth||o.offsetHeight>s.offsetHeight))&&o.className.match(/ratio/gi)&&(o.className=o.className==="ratio_landscape"?"ratio_portrait":"ratio_landscape");var a;r<n.outlets.index?a=n.transition+"_previous":r>n.outlets.index?a=n.transition+"_next":a=n.transition+"_current";Math.abs(r-n.outlets.index)<n.preload&&o.src!==n.figures[r]&&(o.src=n.figures[r]);o.style.marginTop=Math.round(o.offsetHeight/-2)+"px";o.style.marginLeft=Math.round(o.offsetWidth/-2)+"px";e.css.setClass(s,u,a)}t.figures.menu.update(n)},menu:{setup:function(e){e.outlets.slideMenu=document.createElement("menu");e.outlets.slideMenu.className="pager";e.outlets.nextSlide=document.createElement("button");e.outlets.nextSlide.className="next";e.outlets.nextSlideIcon=document.createElement("span");e.outlets.nextSlideIcon.innerHTML="&gt";e.outlets.prevSlide=document.createElement("button");e.outlets.prevSlide.className="previous";e.outlets.prevSlideIcon=document.createElement("span");e.outlets.prevSlideIcon.innerHTML="&lt";e.outlets.nextSlide.appendChild(e.outlets.nextSlideIcon);e.outlets.slideMenu.appendChild(e.outlets.nextSlide);e.outlets.prevSlide.appendChild(e.outlets.prevSlideIcon);e.outlets.slideMenu.appendChild(e.outlets.prevSlide);e.outlets.parent.appendChild(e.outlets.slideMenu);e.divide&&(e.outlets.slideMenu.style.height=e.divide);e.outlets.nextSlide.onclick=function(n){t.figures.menu.next(n,e.outlets.nextSlide,e)};e.outlets.prevSlide.onclick=function(n){t.figures.menu.prev(n,e.outlets.prevSlide,e)}},update:function(e){if(e.outlets.prevSlide){e.outlets.prevSlide.className=e.outlets.prevSlide.className.replace(/ disabled/gi,"");e.outlets.prevSlide.className+=e.outlets.index>1?"":" disabled"}if(e.outlets.nextSlide){e.outlets.nextSlide.className=e.outlets.nextSlide.className.replace(/ disabled/gi,"");e.outlets.nextSlide.className+=e.outlets.index<e.outlets.figures.length-1?"":" disabled"}},next:function(n,r,i){n=n||window.event;var s=n.target||n.srcElement;if(!s.className.match(/disabled/)){i.outlets.index=i.outlets.index<i.outlets.figures.length-1?i.outlets.index+1:1;t.update(i)}s.blur();e.events.cancel(n)},prev:function(n,r,i){n=n||window.event;var s=n.target||n.srcElement;if(!s.className.match(/disabled/)){i.outlets.index=i.outlets.index>1?i.outlets.index-1:i.outlets.figures.length-1;t.update(i)}s.blur();e.events.cancel(n)}}},thumbnails:{setup:function(e){e.outlets.slideNav=document.createElement("nav");e.outlets.slideNav.className="navigation_"+e.navigation;e.outlets.slideDiv=document.createElement("div");e.outlets.slideUl=document.createElement("ul");e.divide&&e.divide!=="100%"&&(e.outlets.slideNav.style.height=100-parseInt(e.divide,10)-parseInt(e.margin,10)+"%");e.margin&&(e.pixelMargin=parseInt(e.outlets.parent.offsetWidth*parseInt(e.margin,10)/100,10));e.outlets.thumbnails=[0];for(var n=1,r=e.thumbnails.length;n<r;n+=1){var i=document.createElement("li"),s=document.createElement("a");s.className=n===1?e.navigation+"_active":e.navigation+"_passive";var o=document.createElement("img");o.style.marginRight=e.pixelMargin+"px";o.alt="";o.src=e.thumbnails[n];o.style.borderColor=e.highlight;s.appendChild(o);s.style.borderColor=e.highlight;i.appendChild(s);e.outlets.slideUl.appendChild(i);e.outlets.thumbnails[n]=s}e.outlets.slideDiv.appendChild(e.outlets.slideUl);e.outlets.slideNav.appendChild(e.outlets.slideDiv);e.outlets.parent.appendChild(e.outlets.slideNav);for(n=1,r=e.thumbnails.length;n<r;n+=1)t.thumbnails.events.thumbnailClick(e.outlets.thumbnails[n],e);t.thumbnails.menu.setup(e)},events:{thumbnailClick:function(e,n){e.onclick=function(r){t.thumbnails.set(r,e,n)}}},update:function(n){t.thumbnails.menu.update(n);for(var r=1,i=n.thumbnails.length;r<i;r+=1){n.outlets.thumbnails[r].className=n.outlets.index===r?n.navigation+"_active":n.navigation+"_passive";n.outlets.thumbnails[r].style.backgroundColor=n.outlets.index===r?n.highlight:"Transparent"}var s=n.outlets.thumbnails[n.outlets.index].getElementsByTagName("img")[0],o=s.offsetLeft,u=s.offsetWidth,a=n.outlets.slideDiv.offsetWidth,f=-1*o+a/2-u/2;f=f>0?0:f;f=f<n.scrollMax&&n.scrollMax<0?n.scrollMax:f;n.navigation==="thumbnails"&&e.css.setRules(n.outlets.slideUl,{marginLeft:f+"px"})},set:function(n,r,i){n=n||window.event;for(var s=1,o=i.outlets.thumbnails.length;s<o;s+=1)if(i.outlets.thumbnails[s]===r){i.outlets.index=s;t.update(i)}e.events.cancel(n)},menu:{setup:function(e){e.outlets.pageMenu=document.createElement("menu");e.outlets.pageMenu.className="scroller";e.outlets.nextPage=document.createElement("button");e.outlets.nextPage.className="next";e.outlets.nextPageIcon=document.createElement("span");e.outlets.nextPageIcon.innerHTML="&gt";e.outlets.prevPage=document.createElement("button");e.outlets.prevPage.className="previous";e.outlets.prevPageIcon=document.createElement("span");e.outlets.prevPageIcon.innerHTML="&lt";e.outlets.nextPage.appendChild(e.outlets.nextPageIcon);e.outlets.pageMenu.appendChild(e.outlets.nextPage);e.outlets.prevPage.appendChild(e.outlets.prevPageIcon);e.outlets.pageMenu.appendChild(e.outlets.prevPage);e.outlets.slideNav.appendChild(e.outlets.pageMenu);e.outlets.nextPage.onclick=function(n){t.thumbnails.menu.next(n,e.outlets.nextSlide,e)};e.outlets.prevPage.onclick=function(n){t.thumbnails.menu.prev(n,e.outlets.prevSlide,e)}},update:function(e){e.scrollPosition=e.outlets.slideUl.style.marginLeft?parseInt(e.outlets.slideUl.style.marginLeft,10):0;e.scrollDistance=e.outlets.slideDiv.offsetWidth;e.scrollMin=0;var t=e.outlets.thumbnails[e.outlets.thumbnails.length-1].getElementsByTagName("img")[0];e.scrollStep=t.offsetWidth;e.scrollMax=-1*(t.offsetLeft+t.offsetWidth)+e.scrollDistance;e.outlets.prevPage.className=e.outlets.prevPage.className.replace(/ disabled/gi,"");e.outlets.prevPage.className+=e.scrollPosition>=e.scrollMin?" disabled":"";e.outlets.nextPage.className=e.outlets.nextPage.className.replace(/ disabled/gi,"");e.outlets.nextPage.className+=e.scrollPosition<=e.scrollMax&&e.scrollMax<0?" disabled":""},next:function(n,r,i){n=n||window.event;var s=n.target||n.srcElement;if(!s.className.match(/disabled/)){var o=i.scrollPosition-i.scrollDistance+i.scrollStep;o<i.scrollMax&&(o=i.scrollMax);e.css.setRules(i.outlets.slideUl,{marginLeft:o+"px"});t.thumbnails.menu.update(i)}s.blur();e.events.cancel(n)},prev:function(n,r,i){n=n||window.event;var s=n.target||n.srcElement;if(!s.className.match(/disabled/)){var o=i.scrollPosition+i.scrollDistance-i.scrollStep;o>0&&(o=0);i.navigation==="thumbnails"&&e.css.setRules(i.outlets.slideUl,{marginLeft:o+"px"});t.thumbnails.menu.update(i)}s.blur();e.events.cancel(n)}}}};e.events=e.events||{};e.events.add=function(e,t,n){t=navigator.userAgent.match(/Firefox/i)&&t.match(/mousewheel/i)?"DOMMouseScroll":t;"addEventListener"in e?e.addEventListener(t,n,!1):"attachEvent"in e?e.attachEvent("on"+t,function(e){n(e)}):e["on"+t]=n};e.events.cancel=function(e){e&&(e.preventDefault?e.preventDefault():e.preventManipulation?e.preventManipulation():e.returnValue=!1)};e.models=e.models||{};e.models.clone=function(e){var t,n;if(typeof Object.create!="undefined")t=Object.create(e);else{n=function(){};n.prototype=e;t=new n}return t};e.models.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};e.css=e.css||{};e.css.select=function(t,n){var r,i,s;n=n||document;t=typeof t=="string"?{rule:t,parent:n}:t;t.parent=t.parent||document;t.data=t.data||{};s=typeof document.querySelectorAll!="undefined"?t.parent.querySelectorAll(t.rule):typeof jQuery!="undefined"?jQuery(t.parent).find(t.rule).get():[];if(typeof t.handler=="undefined")return s;for(r=0,i=s.length;r<i;r+=1)t.handler(s[r],e.models.clone(t.data))};e.css.prefix=function(e){return navigator.userAgent.match(/webkit/gi)?"webkit"+e.substr(0,1).toUpperCase()+e.substr(1):navigator.userAgent.match(/firefox/gi)?"Moz"+e.substr(0,1).toUpperCase()+e.substr(1):navigator.userAgent.match(/microsoft/gi)?"ms"+e.substr(0,1).toUpperCase()+e.substr(1):navigator.userAgent.match(/opera/gi)?"O"+e.substr(0,1).toUpperCase()+e.substr(1):e};e.css.compatibility=function(){var e,t,n;t=document.createElement("div");typeof t.style.MozTransition!="undefined"&&(e="transitionend");try{document.createEvent("OTransitionEvent");e="oTransitionEnd"}catch(r){n=null}try{document.createEvent("WebKitTransitionEvent");e="webkitTransitionEnd"}catch(r){n=null}try{document.createEvent("transitionEvent");e="transitionend"}catch(r){n=null}t=n;return e};e.css.setClass=function(t,n,r,i,s,o){var u,a,f,l;i=i||function(){};f=e.css.compatibility();u=new RegExp(e.models.trim(n).replace(/ {2,}/g," ").split(" ").join("|"),"g");a=new RegExp(r,"g");if(typeof f!="undefined"){t.addEventListener(f,l=function(){i();t.removeEventListener(f,l,!0)},!0);t.className=e.models.trim(t.className.replace(u,"")+" "+r).replace(/ {2,}/g," ")}else if(typeof jQuery!="undefined"&&typeof jQuery.ui!="undefined"){s=s||500;o=o||"swing";jQuery(t).switchClass(n.replace(a,""),r,s,o,i)}else{t.className=e.models.trim(t.className.replace(u,"")+" "+r).replace(/ {2,}/g," ");i()}};e.css.setRules=function(t,n,r){var i,s,o;n.transitionProperty=n.transitionProperty||"all";n.transitionDuration=n.transitionDuration||"300ms";n.transitionTimingFunction=n.transitionTimingFunction||"ease";r=r||function(){};s=e.css.compatibility();if(typeof s!="undefined"){t.addEventListener(s,o=function(){r();t.removeEventListener(s,o,!0)},!0);for(i in n)if(n.hasOwnProperty(i)){t.style[e.css.compatibility(i)]=n[i];t.style[i]=n[i]}}else if(typeof jQuery!="undefined"){var u,a;u=n.transitionTimingFunction.match(/ease/gi)?"swing":"linear";a=parseInt(n.transitionDuration.replace(/s/g,"000").replace(/ms/g,""),10);delete n.transitionProperty;delete n.transitionDuration;delete n.transitionTimingFunction;jQuery(t).animate(n,a,u,r)}else{for(i in n)if(n.hasOwnProperty(i)){t.style[e.css.compatibility(i)]=n[i];t.style[i]=n[i]}r()}};e.slideshow={};e.slideshow.start=t.start})(window.useful=window.useful||{});